package views;

import dbhandlerCRUD.ClaseCRUD;
import dbhandlerCRUD.IdeologiaCRUD;
import dbhandlerCRUD.NacionCRUD;
import dbhandlerCRUD.RazaCRUD;
import dbhandlerCRUD.ReligionCRUD;
import javafx.collections.FXCollections;
import javafx.scene.control.*;
import javafx.scene.layout.GridPane;
import javafx.scene.layout.VBox;
import model.*;

import java.util.List;

import clases_partida.Nacion;
import clases_personaje.Ideologia;
import clases_personaje.Raza;
import clases_personaje.Religion;
import clases_roles.Clase;

public class CreationPersonajeView extends VBox {

    private TextField nombreField;
    private ComboBox<Raza> razaCombo;
    private TextField sexoField;
    private ComboBox<Religion> religionCombo;
    private ComboBox<O_Nacion> nacionCombo;
    private Spinner<Integer> edadSpinner;
    private ComboBox<Clase> claseCombo;
    private ListView<Ideologia> ideologiaList;
    private RazaCRUD razaCrud = new RazaCRUD();
    private ReligionCRUD religionCrud = new ReligionCRUD();
    private NacionCRUD nacionCrud = new NacionCRUD();
    private ClaseCRUD claseCrud = new ClaseCRUD();
    private IdeologiaCRUD ideologiaCrud = new IdeologiaCRUD();

    public CreationPersonajeView() {
        setSpacing(10);
        Label title = new Label("Formulario de nuevo personaje");

        GridPane form = new GridPane();
        form.setHgap(10);
        form.setVgap(10);

        nombreField = new TextField();
        sexoField = new TextField();
        edadSpinner = new Spinner<>(0, 150, 18);

        razaCombo = new ComboBox<>(FXCollections.observableArrayList(razaCrud.fetchAllRazas()));
        religionCombo = new ComboBox<>(FXCollections.observableArrayList(religionCrud.fetchAllReligiones()));
        nacionCombo = new ComboBox<>(FXCollections.observableArrayList(nacionCrud.fetchAllONaciones()));
        claseCombo = new ComboBox<>(FXCollections.observableArrayList(claseCrud.fetchAllClases()));

        ideologiaList = new ListView<>(FXCollections.observableArrayList(ideologiaCrud.fetchAllIdeologias()));
        ideologiaList.getSelectionModel().setSelectionMode(SelectionMode.MULTIPLE);
        ideologiaList.setPrefHeight(100);

        form.add(new Label("Nombre:"), 0, 0);
        form.add(nombreField, 1, 0);
        form.add(new Label("Raza:"), 0, 1);
        form.add(razaCombo, 1, 1);
        form.add(new Label("Sexo:"), 0, 2);
        form.add(sexoField, 1, 2);
        form.add(new Label("Religión:"), 0, 3);
        form.add(religionCombo, 1, 3);
        form.add(new Label("Nación:"), 0, 4);
        form.add(nacionCombo, 1, 4);
        form.add(new Label("Edad:"), 0, 5);
        form.add(edadSpinner, 1, 5);
        form.add(new Label("Clase:"), 0, 6);
        form.add(claseCombo, 1, 6);
        form.add(new Label("Ideologías:"), 0, 7);
        form.add(ideologiaList, 1, 7);

        getChildren().addAll(title, form);
    }

    // Puedes añadir un método para obtener los datos introducidos por el usuario, si hace falta
}
