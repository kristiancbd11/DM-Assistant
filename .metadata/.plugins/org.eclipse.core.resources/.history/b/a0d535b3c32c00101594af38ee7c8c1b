package designerView;

import clases_partida.Mundo;
import javafx.application.Platform;
import javafx.geometry.Rectangle2D;
import javafx.stage.Screen;
import javafx.stage.Stage;

public class DesignerController {

    private final Mundo mundo;
    private TableroView tableroView;
    private PaletaView paletaView;

    public DesignerController(Mundo mundo) {
        this.mundo = mundo;
    }

    public void iniciar() {
        Platform.runLater(() -> {
            Rectangle2D screenBounds = Screen.getPrimary().getVisualBounds();
            int casillaTam = 40;
            int filas = 15, columnas = 25;
            double gridWidth = columnas * casillaTam;
            double gridHeight = filas * casillaTam;
            double paletteWidth = 200;
            double margen = 10;

            double gridX = (screenBounds.getWidth() - (gridWidth + margen + paletteWidth)) / 2;
            double gridY = (screenBounds.getHeight() - gridHeight) / 2;

            tableroView = new TableroView(filas, columnas, casillaTam);
            paletaView = new PaletaView(mundo, tableroView);
            tableroView.setPaleta(paletaView);

            Stage stageTablero = tableroView.crearVentana(gridX, gridY);
            Stage stagePaleta = paletaView.crearVentana(gridX + gridWidth + margen, gridY);

            stageTablero.setOnCloseRequest(e -> stagePaleta.close());
            stagePaleta.setOnCloseRequest(e -> stageTablero.close());
        });
    }
}
