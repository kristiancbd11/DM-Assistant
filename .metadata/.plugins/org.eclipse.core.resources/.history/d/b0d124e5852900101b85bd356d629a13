package views;

import javafx.scene.control.*;
import javafx.scene.layout.HBox;
import javafx.scene.layout.VBox;
import javafx.scene.layout.Priority;

public class ExplorerView {
    private VBox explorer;
    private TreeItem<Object> raizMundos;
    private TreeView<Object> arbolMundos;

    public ExplorerView() {
        // Crear ra√≠z con valor (necesario para renderizar correctamente)
        raizMundos = new TreeItem<>("");
        raizMundos.setExpanded(true);

        // Crear el gr√°fico del nodo ra√≠z
        HBox rootGraphic = new HBox();
        rootGraphic.setSpacing(5);

        Label label = new Label("üåç Mundos");
        Button addButton = new Button("+");
        addButton.setStyle("-fx-font-size: 10; -fx-padding: 2 6 2 6;");
        addButton.setFocusTraversable(false); // Evita que robe foco al hacer clic
        addButton.setOnAction(e -> {
            System.out.println("Agregar nuevo mundo");
        });

        rootGraphic.getChildren().addAll(label, addButton);
        raizMundos.setGraphic(rootGraphic);

        // Crear TreeView
        arbolMundos = new TreeView<>(raizMundos);
        arbolMundos.setShowRoot(true);
        arbolMundos.setStyle("""
            -fx-background-color: transparent;
            -fx-background-insets: 0;
            -fx-padding: 0;
            -fx-border-width: 0;
        """);

        // Hacer que el TreeView ocupe el espacio disponible verticalmente
        VBox.setVgrow(arbolMundos, Priority.ALWAYS);

        // Layout del panel
        explorer = new VBox(new Label("üìÅ Explorer"), arbolMundos);
        explorer.setMinWidth(100);
        explorer.setStyle("-fx-background-color: #DDEEFF; -fx-padding: 10;");
    }

    public VBox getExplorerPane() {
        return explorer;
    }

    public TreeView<Object> getTreeView() {
        return arbolMundos;
    }

    public TreeItem<Object> getRootItem() {
        return raizMundos;
    }
}