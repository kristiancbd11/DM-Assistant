package views;

import javafx.scene.control.*;
import javafx.scene.layout.HBox;
import javafx.scene.layout.VBox;
import javafx.scene.layout.Priority;

public class ExplorerView {
    private VBox explorer;

    // Primer TreeView (üåç Mundos)
    private TreeItem<Object> raizMundos;
    private TreeView<Object> arbolMundos;

    // Segundo TreeView (üóÇ ROG Archive)
    private TreeItem<Object> raizRog;
    private TreeView<Object> arbolRog;

    public ExplorerView() {
        // üåç Mundos
        raizMundos = new TreeItem<>("");
        raizMundos.setExpanded(true);
        arbolMundos = crearTreeView(raizMundos, "üåç Mundos", "Agregar nuevo mundo");

        // üóÇ ROG Archive
        raizRog = new TreeItem<>("");
        raizRog.setExpanded(true);
        arbolRog = crearTreeView(raizRog, "üóÇ ROG Archive", "Agregar archivo");

        // Layout principal
        explorer = new VBox(
            new Label("üìÅ Explorer"),
            arbolMundos,
            arbolRog
        );
        VBox.setVgrow(arbolMundos, Priority.ALWAYS);
        VBox.setVgrow(arbolRog, Priority.ALWAYS);

        explorer.setMinWidth(100);
        explorer.setStyle("-fx-background-color: #DDEEFF; -fx-padding: 10;");
    }

    private TreeView<Object> crearTreeView(TreeItem<Object> raiz, String titulo, String accionTexto) {
        HBox graphic = new HBox(5);
        Label label = new Label(titulo);
        Button addButton = new Button("+");
        addButton.setStyle("-fx-font-size: 10; -fx-padding: 2 6 2 6;");
        addButton.setFocusTraversable(false);
        addButton.setOnAction(e -> System.out.println(accionTexto));

        graphic.getChildren().addAll(label, addButton);
        raiz.setGraphic(graphic);

        TreeView<Object> tree = new TreeView<>(raiz);
        tree.setShowRoot(true);
        tree.setStyle("""
            -fx-background-color: transparent;
            -fx-background-insets: 0;
            -fx-padding: 0;
            -fx-border-width: 0;
        """);

        return tree;
    }

    public VBox getExplorerPane() {
        return explorer;
    }

    public TreeView<Object> getTreeViewMundos() {
        return arbolMundos;
    }

    public TreeView<Object> getTreeViewRogArchive() {
        return arbolRog;
    }

    public TreeItem<Object> getRootItemMundos() {
        return raizMundos;
    }

    public TreeItem<Object> getRootItemRogArchive() {
        return raizRog;
    }
}
