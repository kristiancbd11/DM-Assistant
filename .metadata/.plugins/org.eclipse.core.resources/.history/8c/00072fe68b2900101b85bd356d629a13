package views;

import dbhandlerCRUD.ClaseCRUD;
import dbhandlerCRUD.IdeologiaCRUD;
import dbhandlerCRUD.NacionCRUD;
import dbhandlerCRUD.RazaCRUD;
import dbhandlerCRUD.ReligionCRUD;
import javafx.collections.FXCollections;
import javafx.scene.control.*;
import javafx.scene.layout.GridPane;
import javafx.scene.layout.HBox;
import javafx.scene.layout.VBox;

import clases_partida.O_Nacion;
import clases_personaje.Ideologia;
import clases_personaje.Raza;
import clases_personaje.Religion;
import clases_roles.Clase;

public class CreationPersonajeView extends VBox {

	private TextField nombreField;
	private ComboBox<Raza> razaCombo;
	private TextField sexoField;
	private ComboBox<Religion> religionCombo;
	private ComboBox<O_Nacion> nacionCombo;
	private Spinner<Integer> edadSpinner;
	private ComboBox<Clase> claseCombo;
	private ComboBox<Ideologia> ideologiaCombo;
	private RazaCRUD razaCrud = new RazaCRUD();
	private ReligionCRUD religionCrud = new ReligionCRUD();
	private NacionCRUD nacionCrud = new NacionCRUD();
	private ClaseCRUD claseCrud = new ClaseCRUD();
	private IdeologiaCRUD ideologiaCrud = new IdeologiaCRUD();

	// Botones
	private Button btnCrear;
	private Button btnCancelar;

	public CreationPersonajeView() {
		setSpacing(10);
		Label title = new Label("Formulario de nuevo personaje");

		// Formulario de entrada
		GridPane form = new GridPane();
		form.setHgap(10);
		form.setVgap(10);

		nombreField = new TextField();
		sexoField = new TextField();
		edadSpinner = new Spinner<>(0, 150, 18);

		razaCombo = new ComboBox<>(FXCollections.observableArrayList(razaCrud.fetchAllRazas()));
		religionCombo = new ComboBox<>(FXCollections.observableArrayList(religionCrud.fetchAllReligiones()));
		nacionCombo = new ComboBox<>(FXCollections.observableArrayList(nacionCrud.fetchAllONaciones()));
		claseCombo = new ComboBox<>(FXCollections.observableArrayList(claseCrud.fetchAllClases()));
		ideologiaCombo = new ComboBox<>(FXCollections.observableArrayList(ideologiaCrud.fetchAllIdeologias()));

		form.add(new Label("Nombre:"), 0, 0);
		form.add(nombreField, 1, 0);
		form.add(new Label("Raza:"), 0, 1);
		form.add(razaCombo, 1, 1);
		form.add(new Label("Sexo:"), 0, 2);
		form.add(sexoField, 1, 2);
		form.add(new Label("Religión:"), 0, 3);
		form.add(religionCombo, 1, 3);
		form.add(new Label("Nación:"), 0, 4);
		form.add(nacionCombo, 1, 4);
		form.add(new Label("Edad:"), 0, 5);
		form.add(edadSpinner, 1, 5);
		form.add(new Label("Clase:"), 0, 6);
		form.add(claseCombo, 1, 6);
		form.add(new Label("Ideología:"), 0, 7);
		form.add(ideologiaCombo, 1, 7);

		// Configurar los botones
		btnCrear = new Button("Crear");
		btnCancelar = new Button("Cancelar");

		// HBox para colocar los botones en una fila
		HBox buttonBox = new HBox(10, btnCrear, btnCancelar);
		buttonBox.setSpacing(10);

		// Añadir todo al layout
		getChildren().addAll(title, form, buttonBox);

		// Bloques de atributos físicos y habilidades
		String[] fueAttrs = { "Impacto", "Destrozo", "Carga", "Levantamiento", "Vigor", "Atletismo" };
		String[] conAttrs = { "Vitalidad", "Corpulencia", "Regeneración", "Tenacidad", "Resistencia", "Motricidad" };
		String[] desAttrs = { "Agilidad", "Presteza", "Reflejos", "Combate", "Sigilo", "Precisión" };
		String[] intAttrs = { "Perspicacia", "Intuición", "Investigación", "Estrategia", "Memoria", "Com. Arcana" };
		String[] carAttrs = { "Convicción", "Engaño", "Intimidación", "Liderazgo", "Jovialidad", "Seducción" };
		String[] sabAttrs = { "Conocimiento", "Medicina", "Percepción", "Empatía", "Voluntad", "Supervivencia" };

		VBox atributosBox = new VBox(10);
		atributosBox.getChildren().addAll(crearBloqueAtributos("FUE", fueAttrs), crearBloqueAtributos("CON", conAttrs),
				crearBloqueAtributos("DES", desAttrs), crearBloqueAtributos("INT", intAttrs),
				crearBloqueAtributos("CAR", carAttrs), crearBloqueAtributos("SAB", sabAttrs));

		getChildren().add(atributosBox);

	}

	private VBox crearBloqueAtributos(String atributoPrincipal, String[] subatributos) {
		VBox contenedor = new VBox(5);
		Label titulo = new Label("(" + atributoPrincipal + ")");
		GridPane grid = new GridPane();
		grid.setHgap(5);
		grid.setVgap(5);

		for (int i = 0; i < subatributos.length; i++) {
			Label label = new Label("(" + subatributos[i] + ")");
			Spinner<Integer> spinner = new Spinner<>(0, 100, 0);
			spinner.setPrefWidth(60);
			grid.add(label, i, 0);
			grid.add(spinner, i, 1);
		}

		contenedor.getChildren().addAll(titulo, grid);
		return contenedor;
	}

	// Métodos getter y setter para los campos (para que puedas acceder a ellos
	// desde los controladores)

	public TextField getNombreField() {
		return nombreField;
	}

	public void setNombreField(TextField nombreField) {
		this.nombreField = nombreField;
	}

	public ComboBox<Raza> getRazaCombo() {
		return razaCombo;
	}

	public void setRazaCombo(ComboBox<Raza> razaCombo) {
		this.razaCombo = razaCombo;
	}

	public TextField getSexoField() {
		return sexoField;
	}

	public void setSexoField(TextField sexoField) {
		this.sexoField = sexoField;
	}

	public ComboBox<Religion> getReligionCombo() {
		return religionCombo;
	}

	public void setReligionCombo(ComboBox<Religion> religionCombo) {
		this.religionCombo = religionCombo;
	}

	public ComboBox<O_Nacion> getNacionCombo() {
		return nacionCombo;
	}

	public void setNacionCombo(ComboBox<O_Nacion> nacionCombo) {
		this.nacionCombo = nacionCombo;
	}

	public Spinner<Integer> getEdadSpinner() {
		return edadSpinner;
	}

	public void setEdadSpinner(Spinner<Integer> edadSpinner) {
		this.edadSpinner = edadSpinner;
	}

	public ComboBox<Clase> getClaseCombo() {
		return claseCombo;
	}

	public void setClaseCombo(ComboBox<Clase> claseCombo) {
		this.claseCombo = claseCombo;
	}

	public ComboBox<Ideologia> getIdeologiaCombo() {
		return ideologiaCombo;
	}

	public void setIdeologiaCombo(ComboBox<Ideologia> ideologiaCombo) {
		this.ideologiaCombo = ideologiaCombo;
	}

	public RazaCRUD getRazaCrud() {
		return razaCrud;
	}

	public void setRazaCrud(RazaCRUD razaCrud) {
		this.razaCrud = razaCrud;
	}

	public ReligionCRUD getReligionCrud() {
		return religionCrud;
	}

	public void setReligionCrud(ReligionCRUD religionCrud) {
		this.religionCrud = religionCrud;
	}

	public NacionCRUD getNacionCrud() {
		return nacionCrud;
	}

	public void setNacionCrud(NacionCRUD nacionCrud) {
		this.nacionCrud = nacionCrud;
	}

	public ClaseCRUD getClaseCrud() {
		return claseCrud;
	}

	public void setClaseCrud(ClaseCRUD claseCrud) {
		this.claseCrud = claseCrud;
	}

	public IdeologiaCRUD getIdeologiaCrud() {
		return ideologiaCrud;
	}

	public void setIdeologiaCrud(IdeologiaCRUD ideologiaCrud) {
		this.ideologiaCrud = ideologiaCrud;
	}

	public Button getBtnCrear() {
		return btnCrear;
	}

	public void setBtnCrear(Button btnCrear) {
		this.btnCrear = btnCrear;
	}

	public Button getBtnCancelar() {
		return btnCancelar;
	}

	public void setBtnCancelar(Button btnCancelar) {
		this.btnCancelar = btnCancelar;
	}

}
